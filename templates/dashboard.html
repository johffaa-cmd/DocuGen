{% extends "base.html" %}

{% block title %}Dashboard - DocuGen{% endblock %}

{% block content %}
<div class="card">
    <h2 style="color: #667eea; margin-bottom: 1.5rem;">Welcome, {{ user.username }}!</h2>
    
    <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem;">
        <h3 style="color: #333; margin-bottom: 1rem;">Your Account Information</h3>
        <p style="margin-bottom: 0.5rem;"><strong>Username:</strong> {{ user.username }}</p>
        <p style="margin-bottom: 0.5rem;"><strong>Email:</strong> {{ user.email }}</p>
        <p style="margin-bottom: 0;"><strong>Documents Created:</strong> {{ documents|length }}</p>
    </div>
    
    <div style="background-color: #e7f3ff; padding: 1.5rem; border-radius: 4px; border-left: 4px solid #667eea; margin-bottom: 2rem;">
        <h3 style="color: #333; margin-bottom: 1rem;">Create New Document</h3>
        <p style="color: #666; margin-bottom: 1rem;">
            Generate professional PDF documents instantly!
        </p>
        <a href="{{ url_for('generate_document') }}" class="btn btn-primary">
            Generate Document
        </a>
    </div>

    {% if documents %}
    <div style="margin-top: 2rem;">
        <h3 style="color: #333; margin-bottom: 1rem;">Your Documents</h3>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                        <th style="padding: 1rem; text-align: left; color: #333;">Title</th>
                        <th style="padding: 1rem; text-align: left; color: #333;">Type</th>
                        <th style="padding: 1rem; text-align: left; color: #333;">Created</th>
                        <th style="padding: 1rem; text-align: left; color: #333;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for doc in documents %}
                    <tr style="border-bottom: 1px solid #dee2e6;">
                        <td style="padding: 1rem;">{{ doc.title }}</td>
                        <td style="padding: 1rem;">
                            <span style="background-color: #667eea; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem;">
                                {{ doc.doc_type.capitalize() }}
                            </span>
                        </td>
                        <td style="padding: 1rem;">{{ doc.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                        <td style="padding: 1rem;">
                            <a href="{{ url_for('download_document', doc_id=doc.id) }}" class="btn btn-primary" style="padding: 0.5rem 1rem; margin-right: 0.5rem;">
                                Download
                            </a>
                            <form method="POST" action="{{ url_for('delete_document', doc_id=doc.id) }}" style="display: inline;">
                                <button type="submit" class="btn btn-secondary" style="padding: 0.5rem 1rem;" 
                                        onclick="return confirm('Are you sure you want to delete this document?');">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div style="margin-top: 2rem; text-align: center; padding: 2rem; background-color: #f8f9fa; border-radius: 4px;">
        <p style="color: #666; font-size: 1.1rem;">You haven't created any documents yet.</p>
        <p style="color: #666;">Click the "Generate Document" button above to create your first document!</p>
    </div>
    {% endif %}
</div>
{% endblock %}
